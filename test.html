<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gmail</title>
<link rel="icon" href="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" type="image/x-icon">
<style>
  body { margin:0; font-family:'Segoe UI', sans-serif; background:#0f0f0f; color:#eee; transition:all 0.5s; display:flex; }
  #sidebar { width:200px; background:#111; padding:20px 10px; box-shadow:2px 0 5px rgba(0,0,0,0.5); position:fixed; height:100vh; overflow:auto; }
  #sidebar ul { list-style:none; padding:0; margin:0; }
  #sidebar li { padding:10px; margin-bottom:5px; cursor:pointer; border-radius:5px; transition:0.3s; display:flex; align-items:center; }
  #sidebar li span { margin-right:8px; }
  #sidebar li:hover, #sidebar li.active { background:#222; box-shadow:0 0 5px #0ff; }

  main { margin-left:220px; padding:20px; flex:1; }
  section { margin-bottom:40px; scroll-margin-top:60px; }
  section h2 { margin-bottom:10px; font-size:1.4rem; border-bottom:2px solid #555; padding-bottom:5px; display:flex; align-items:center; }
  section h2 span { margin-right:10px; }
  .tiles { display:flex; flex-wrap:wrap; gap:15px; justify-content:flex-start; }
  .tile { flex: 1 1 calc(25% - 15px); min-width:120px; height:150px; background:#222; display:flex; align-items:center; justify-content:center; color:#eee; text-align:center; font-weight:bold; cursor:pointer; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.5); transition: all 0.3s; perspective: 1000px; }
  .tile:hover { transform: rotateX(5deg) rotateY(5deg) scale(1.05); box-shadow:0 0 15px #0ff; }

  iframe { width:100%; height:500px; border:none; margin-top:20px; border-radius:8px; }

  header { position:fixed; top:0; left:220px; right:0; height:50px; background:#111; display:flex; justify-content:flex-end; align-items:center; padding:0 20px; box-shadow:0 2px 5px rgba(0,0,0,0.5); z-index:1000; }
  #themeBtn { padding:5px 12px; cursor:pointer; border:none; border-radius:4px; background:#222; color:#eee; font-weight:bold; transition:0.3s; }
  #themeBtn:hover { background:#444; }

  body[data-theme="default"] { background:#0f0f0f; color:#eee; }
  body[data-theme="dark"] { background:#111; color:#ccc; }
  body[data-theme="kuromi"] { background:#f6e6ff; color:#330033; }
  body[data-theme="cyberpunk"] { background:#0d0d20; color:#0ff; }
  body[data-theme="retro"] { background:#1a1a1a; color:#ffea00; font-family:'Press Start 2P', monospace; }
  body[data-theme="mystic"] { background:#fafafa; color:#333; }

  @media(max-width:1024px){ .tile { flex: 1 1 calc(33% - 15px); } }
  @media(max-width:768px){ .tile { flex: 1 1 calc(50% - 15px); } #sidebar{position:relative;width:100%;height:auto;display:flex;overflow-x:auto;} main{margin-left:0;margin-top:60px;} header{left:0;} }
  @media(max-width:480px){ .tile { flex: 1 1 100%; } }
</style>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body data-theme="default">

<div id="sidebar"><ul id="sidebarList"></ul></div>
<header><button id="themeBtn">Change Theme</button></header>
<main id="mainContent"></main>
<iframe id="previewIframe"></iframe>

<script>
const themes = ["default","dark","kuromi","cyberpunk","retro","mystic"];
let currentTheme=0;
document.getElementById("themeBtn").addEventListener("click",()=>{
  currentTheme=(currentTheme+1)%themes.length;
  document.body.dataset.theme=themes[currentTheme];
});

const main=document.getElementById("mainContent");
const iframe=document.getElementById("previewIframe");
const sidebarList=document.getElementById("sidebarList");
const categoryIcons={"Media":"ðŸŽ¬","Arcade Games":"ðŸ•¹ï¸","Brain Teasers":"ðŸ§©","Mangas & Comics":"ðŸ“š","Daily Games":"ðŸŽ¯"};

fetch('hubData.json')
  .then(res=>res.json())
  .then(hubData=>{
    // Generate sections and sidebar
    for(const sectionName in hubData){
      const section=document.createElement("section");
      section.id=sectionName;
      const header=document.createElement("h2");
      const iconSpan=document.createElement("span");
      iconSpan.textContent=categoryIcons[sectionName]||"";
      header.appendChild(iconSpan);
      header.appendChild(document.createTextNode(sectionName));
      section.appendChild(header);

      const tileContainer=document.createElement("div");
      tileContainer.className="tiles";
      hubData[sectionName].forEach(item=>{
        const tile=document.createElement("div");
        tile.className="tile";
        tile.textContent=item.title;
        tile.dataset.url=item.url;
        tile.addEventListener("click",()=>{iframe.src=item.url;iframe.scrollIntoView({behavior:"smooth"});});
        tileContainer.appendChild(tile);
      });
      section.appendChild(tileContainer);
      main.appendChild(section);

      // Sidebar
      const li=document.createElement("li");
      li.innerHTML=`<span>${categoryIcons[sectionName]||""}</span>${sectionName}`;
      li.addEventListener("click",()=>{document.getElementById(sectionName).scrollIntoView({behavior:"smooth"});});
      sidebarList.appendChild(li);
    }

    // Highlight sidebar on scroll
    window.addEventListener("scroll",()=>{
      const sections=document.querySelectorAll("main section");
      let current="";
      sections.forEach(sec=>{ const top=sec.offsetTop-60; if(window.scrollY>=top) current=sec.id; });
      document.querySelectorAll("#sidebar li").forEach(li=>{ li.classList.remove("active"); if(li.textContent.includes(current)) li.classList.add("active"); });
    });
  })
  .catch(err=>console.error("Failed to load hubData.json:", err));
</script>
</body>
</html>
